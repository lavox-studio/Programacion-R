---
title: "R para Ingenier√≠as y Ciencias"
author: "La Academia"
subtitle: "Tema 20 - Teor√≠a"
output:
  html_document:
    df_print: paged
---

# Creaci√≥n de funciones personalizadas

Una funci√≥n personalizada en R es un bloque reutilizable de c√≥digo definido por el usuario. Permite encapsular una operaci√≥n o algoritmo bajo un nombre, lo que facilita la organizaci√≥n del c√≥digo, la reutilizaci√≥n y el mantenimiento de programas complejos.

![](https://github.com/lavox-studio/Programacion-R/blob/main/_Im%C3%A1genes/Tema%2020%20-%20Creaci%C3%B3n%20de%20funciones%20personalizadas/2.png?raw=true){width="532"}

> Crear funciones es fundamental en contextos ingenieriles y cient√≠ficos donde se deben aplicar procedimientos similares a m√∫ltiples conjuntos de datos o realizar simulaciones repetidas.

## Crear funciones

Crear funciones en R es una habilidad esencial para estructurar c√≥digo eficiente, modular y reutilizable. Permite encapsular l√≥gica compleja bajo un nombre espec√≠fico y usarla m√∫ltiples veces, simplemente llam√°ndola con diferentes argumentos.

> En ingenier√≠a y ciencias, crear funciones permite implementar modelos, c√°lculos o simulaciones que pueden aplicarse a distintos escenarios sin reescribir el c√≥digo cada vez.

### Proceso para crear una funci√≥n

1.  Definir el prop√≥sito de la funci√≥n.
2.  Identificar los argumentos de entrada necesarios.
3.  Escribir las instrucciones que procesan esos argumentos.
4.  Incluir un valor de retorno (si se requiere).
5.  Probar la funci√≥n con distintos valores.

``` r
# Sintaxis
nombre_funcion <- function(argumento1, argumento2, ...) {
    # cuerpo de la funci√≥n
    return(resultado)
}
```

-   Los nombres deben ser descriptivos y no usar palabras reservadas.

-   El uso de `return()` es opcional si el √∫ltimo valor evaluado debe devolverse.

```{r}
# Ingresa tu c√≥digo aqu√≠ üëΩ
```

------------------------------------------------------------------------

### Ejemplo 1

Define una funci√≥n que calcule el valor futuro ajustado de una inversi√≥n que recibe aportes mensuales variables. Utilice

$$
V_F = \sum_{i=1}^n A_i (1 + r)^{n-i}
$$

donde:

-   $A_i$: aporte en el mes $i$

-   $r$: tasa mensual

-   $n$: cantidad total de meses

Realice una prueba con estos datos:

-   Aportes: `c(500, 600, 550, 700, 650)`

-   Tasa mensual: 1.5%

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci√≥n

```{r}
# Ingresa tu c√≥digo aqu√≠ üëΩ
```

------------------------------------------------------------------------

### Ejemplo 2

Crea una funci√≥n que calcule la energ√≠a total perdida por conducci√≥n a trav√©s de una pared compuesta por m√∫ltiples capas, cada una con su espesor (m) y conductividad t√©rmica (W/m¬∑K). Utilice

$$
Q = \frac{\Delta T}{\sum_{i=1}^n \left( \frac{L_i}{k_i} \right)}
$$

donde:

-   $L_i$: aporte de la capa $i$

-   $k_i$: conductividad de la capa $i$

-   $\Delta T$: diferencia de temperatura entre caras (¬∫C)

Realice una prueba con estos datos:

-   Capas:

    -   Espesores: `c(0.1, 0.05, 0.2)` m

    -   Conductividades: `c(0.8, 0.04, 1.5)` W/m¬∑K

-   ŒîT: 25 ¬∞C

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci√≥n

```{r}
# Ingresa tu c√≥digo aqu√≠ üëΩ
```

------------------------------------------------------------------------

### Ejemplo 3

Crea una funci√≥n que clasifique el tipo de pandeo de columnas bajo carga axial, seg√∫n su esbeltez $\lambda$. Utilice

$$
\lambda = \frac{L}{r} \quad \text{donde} \quad r = \sqrt{\frac{I}{A}}
$$

donde:

-   $L$: longitud

-   $I$: momento de inercia

-   $A$: √°rea

-   Clasificaci√≥n:

    -   $\lambda < 50$: Pandeo corto

    -   $50 \le \lambda \le 120$: Pandeo intermedio

    -   $\lambda > 120$: Pandeo largo

Realice una prueba con estos datos:

-   Longitudes: `c(1.5, 2.0, 3.0)` m

-   Inercias: `c(8e-6, 1.2e-5, 9e-6)` m‚Å¥

-   √Åreas: `c(0.004, 0.005, 0.0045)` m¬≤

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci√≥n

```{r}
# Ingresa tu c√≥digo aqu√≠ üëΩ
```

------------------------------------------------------------------------

### Ejemplo 4

Escribe una funci√≥n que reciba un vector de valores y devuelva el valor at√≠pico m√°s extremo, si existe, usando la regla de los cuartiles.

Un valor $x$ es extremo si: $x > Q_3 + 3 IQR \quad \text{o} \quad x < Q_1 - 3 IQR$, donde:

-   $Q_1$: Primer cuartil

-   $Q_3$: Tercer cuartil

-   $IQR = Q_3 - Q_1$

Realice una prueba con estos datos:

-   Valores: `c(12, 15, 14, 16, 15, 17, 13, 19, 22, 90)`

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci√≥n

```{r}
# Ingresa tu c√≥digo aqu√≠ üëΩ
```

------------------------------------------------------------------------

### Ejemplo 5

Define una funci√≥n que calcule el valor presente neto (VPN) de un proyecto con flujos de caja variables y una tasa de descuento dada. Utilice

$$
VPN = \sum_{i=0}^n \frac{F_i}{(1 + r)^i}
$$

donde:

-   $F_i$: flujo en el a√±o $i$

-   $r$: tasa de descuento

Realice una prueba con estos datos:

-   Flujos: `c(-10000, 3000, 4000, 3500, 2500)`

-   Tasa de descuento: 8%

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci√≥n

```{r}
# Ingresa tu c√≥digo aqu√≠ üëΩ
```

------------------------------------------------------------------------

## Ambientes

Los **ambientes**, o **espacios de trabajo de c√≥digo**, son una de las m√°s grandes diferencias entre un cuaderno de c√≥digo R Markdown y una funci√≥n. Es evidente que podemos crear un cuaderno de c√≥digo que haga cualquier cosa que pensemos y podamos programar, pero una funci√≥n lo hace m√°s r√°pido.

![Tomado de la documentaci√≥n oficial de MATLAB.](https://github.com/lavox-studio/Programacion-R/blob/main/_Im%C3%A1genes/Tema%2020%20-%20Creaci%C3%B3n%20de%20funciones%20personalizadas/1.png?raw=true){width="566"}

El **ambiente base** es con el que hemos estado trabajando por defecto. En cuanto creamos una variable, realizamos c√°lculos, etc., todo esto se guarda en el **ambiente base**. No obstante, el **ambiente de funciones** se crea cuando se llama a una funci√≥n, por lo que estar√° totalmente vac√≠o y √∫nicamente tendr√° las entradas que se le d√© a la funci√≥n. Una vez la funci√≥n termine la serie de instrucciones dentro de ella y devuelva las salidas, el **ambiente de la funci√≥n** se elimina y se retorna al **ambiente base**.

La ventaja de que las funciones tengan su propio ambiente es que no necesitan espacio (memoria) para guardar variables, funciones, clases o lo que se haya creado previamente. Esto no pasa en el ambiente base, puesto que debe reservar memoria para todo lo que programemos. He ah√≠ la diferencia y la ventaja de crear funciones frente a utilizar c√≥digo dentro de un cuaderno de c√≥digo √∫nicamente.

Cabe destacar que los ambientes est√°n aislados uno del otro. La √∫nica conexi√≥n que tienen es cuando se llama a una funci√≥n, entonces la funci√≥n crea su ambiente obteniendo del ambiente base las entradas y luego devolviendo las salidas.

------------------------------------------------------------------------
