---
title: "R para Ingenier칤as y Ciencias"
author: "La Academia"
subtitle: "Tema 19 - Teor칤a"
output:
  html_document:
    df_print: paged
---

# Estructuras de repetici칩n o bucles

Los bucles permiten repetir un conjunto de instrucciones m칰ltiples veces. En R, son fundamentales para automatizar tareas repetitivas, como iterar sobre elementos de vectores, listas, o c치lculos que dependen de condiciones.

![](https://github.com/lavox-studio/Programacion-R/blob/main/_Im%C3%A1genes/Tema%2019%20-%20Estructuras%20de%20repetici%C3%B3n%20o%20bucles/1.png?raw=true){width="863"}

En este tema aprender치s sobre los dos bucles principales en R:

-   `for` (bucle definido)

-   `while` (bucle condicional)

## Estructura `for`

El bucle `for` en R permite **iterar sobre una secuencia de elementos**, ejecutando un bloque de c칩digo una vez por cada elemento de la secuencia. Es 칰til cuando se conoce de antemano cu치ntas veces se necesita repetir una tarea.

Este tipo de bucle es com칰n en c치lculos iterativos, automatizaci칩n de procesos repetitivos, y recorridos de estructuras de datos como vectores, matrices o listas.

``` r
# Sintaxis
for (variable in secuencia) {
    # instrucciones a ejecutar
}
```

-   `variable`: nombre temporal que tomar치 cada valor de la `secuencia`.

-   `secuencia`: vector, lista o rango sobre el cual se itera.

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

### Iterar por elemento

Es posible utilizar un bucle `for` e ir iterando directamente sobre cada elemento de la secuencia.

``` r
# Sintaxis
for (elemento in secuencia) {
    # instrucciones a ejecutar
}
```

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

### Iterar por 칤ndice

Asimismo, es posible utilizar un bucle `for` e ir iterando sobre cada elemento de la secuencia a trav칠s de su 칤ndice posicional. Esta forma es bastante 칰til cuando no se requiere 칰nicamente el elemento de la secuencia, o se requiere trabajar con m칰ltiples elementos de la secuencias de forma din치mica.

``` r
# Sintaxis
for (i in 1:length(secuencia)) {
    # instrucciones a ejecutar
}
```

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

------------------------------------------------------------------------

### Ejemplo 1

Un conjunto de 3 sensores registr칩 los siguientes voltajes (en voltios) en distintas mediciones:

-   Sensor 1: 5.1, 5.0, 10.3, 10.4, 4.9

-   Sensor 2: 3.3, 3.4, 9.0, 9.2, 9.1

-   Sensor 3: 4.2, 4.1, 4.2, 4.3, 4.4

Detecta para cada sensor los 칤ndices donde la diferencia entre valores consecutivos supera los 5 voltios.

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci칩n

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

------------------------------------------------------------------------

### Ejemplo 2

Se tiene una lista de 4 perfiles estructurales con sus dimensiones y cargas (en kN):

-   Perfil A (tipo I): `base=20`, `altura=40`, `carga_max=100`, `carga_aplicada=90`

-   Perfil B (tipo L): `base=15`, `altura=30`, `carga_max=70`, `carga_aplicada=80`

-   Perfil C (tipo T): `base=25`, `altura=50`, `carga_max=120`, `carga_aplicada=110`

-   Perfil D (tipo H): `base=30`, `altura=60`, `carga_max=150`, `carga_aplicada=140`

Determina cu치les perfiles soportan la carga aplicada sin superar su carga m치xima.

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci칩n

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

------------------------------------------------------------------------

### Ejemplo 3

Un portafolio tiene 5 activos con precios diarios durante 10 d칤as:

-   Activo 1: 100, 102, 101, 105, 107, 110, 111, 113, 115, 117

-   Activo 2: 50, 51, 50, 52, 53, 55, 54, 56, 57, 58

-   Activo 3: 80, 82, 81, 83, 85, 87, 86, 88, 90, 92

-   Activo 4: 120, 118, 119, 121, 123, 124, 125, 127, 128, 130

-   Activo 5: 60, 61, 62, 63, 64, 65, 66, 67, 68, 69

Determina para cada activo los d칤as donde el precio aument칩 respecto al d칤a anterior y cu치ntos d칤as consecutivos tuvo incrementos.

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci칩n

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

------------------------------------------------------------------------

## Estructura `while`

El **bucle `while`** es una estructura de control que permite ejecutar repetidamente un bloque de c칩digo mientras una condici칩n l칩gica se mantenga verdadera.

A diferencia del bucle `for`, que generalmente itera un n칰mero conocido de veces, el bucle `while` es 칰til cuando no se sabe cu치ntas veces ser치 necesario repetir la operaci칩n y se depende de que una condici칩n cambie durante la ejecuci칩n.

``` r
# Sintaxis
while (condici칩n) {
    # C칩digo a ejecutar mientras la condici칩n sea TRUE
}
```

-   `condici칩n`: expresi칩n l칩gica que se eval칰a antes de cada iteraci칩n.

-   El bloque de c칩digo dentro de `{}` se ejecuta mientras la condici칩n sea verdadera.

-   Si la condici칩n es falsa desde el inicio, el bloque no se ejecuta ni una vez.

> Imagina un sistema de bombeo en una planta qu칤mica que debe mantenerse activo **mientras** el nivel de un tanque sea menor a un valor cr칤tico para evitar desbordes. No sabemos cu치ntas veces se deber치 bombear, solo que se debe repetir el proceso mientras el nivel sea bajo.

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

------------------------------------------------------------------------

### Ejemplo 1

Un medicamento se administra cada 6 horas. La concentraci칩n plasm치tica inicial es 50 mg/L y disminuye 12% cada hora. Determina cu치ntas horas pasan hasta que la concentraci칩n sea menor a 5 mg/L.

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci칩n

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

------------------------------------------------------------------------

### Ejemplo 2

La poblaci칩n de una especie invasora se multiplica un 10% diario, pero cada d칤a muere un n칰mero fijo de 5 individuos por control biol칩gico. Si la poblaci칩n inicial es 50, calcula cu치ntos d칤as pasan hasta que la poblaci칩n supere los 500 individuos.

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci칩n

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

------------------------------------------------------------------------

### Ejemplo 3

Un fondo de inversi칩n inicia con \$15 000 y crece 1.2% mensual. Sin embargo, se retiran \$200 mensuales. Calcula cu치ntos meses pasan hasta que el fondo alcance al menos \$25,000.

> [**Nota:**]{.underline} Recuerda utilizar el enfoque EPS.

### Soluci칩n

```{r}
# Ingresa tu c칩digo aqu칤 游놓
```

------------------------------------------------------------------------

## Recomendaciones

-   Siempre que una tarea sea repetitiva se puede utilizar un bucle `for` o un bucle `while`.

-   La elecci칩n de cu치l se deber칤a utilizar se basa en la pregunta: **쯖onozco cu치ntas veces debe repetirse el c칩digo?**

    -   Si la respuesta es **s칤**, entonces se recomienda un bucle `for`.

    -   Si la respuesta es **no**, entonces se recomienda un bucle `while`.

    -   No obstante, 칠stas son solo recomendaciones. En la pr치ctica, un buen programador puede trabajar con cualquier bucle en cualquier situaci칩n.

-   쮼s posible utilizar un bucle `for` dentro otro bucle `for`? Claro que s칤. A esto se le conoce como **bucles anidados** (bucles dentro de bucles). Tambi칠n es posible hacerlo con el bucle `while` e incluso se puede combinar el uso del bucle `for` con el bucle `while`, seg칰n la necesidad.

    -   No obstante, **NO se recomienda utilizar bucles anidados**. Estos bucles requieren de un nivel alto de compresi칩n y abstracci칩n de c칩digo. Son muy 칰tiles siempre y cuando se sepa exactamente c칩mo se los est치 utilizando. Caso contrario, se debe evitar su uso.

-   쮼s posible utilizar un bucle (`for` o `while`) con el condicional `if`? Por supuesto que s칤. Seg칰n tu necesidad, puedes tener bucles dentro del `if` o viceversa, tener condicionales dentro de bucles.

    -   De aqu칤 en adelante tienes el **control total del flujo del c칩digo** y puedes adaptarlo a un sinn칰mero de situaciones.

-   Y lo m치s importante: **los bucles SIEMPRE deben ser tu 칔LTIMA OPCI칍N**. Un ingeniero, o cient칤fico, que sabe programar domina la **vectorizaci칩n de c칩digo**: operaciones arreglo (elemento a elemento), operaciones matriciales, indexaci칩n de estructuras de datos (listas, data frames, ...), etc. Por lo tanto, en situaciones donde no es posible vectorizar el c칩digo se utilizan bucles.
